{
  "version": 3,
  "sources": ["../../leaflet-moving-rotated-marker/leaflet.movingRotatedMarker.js"],
  "sourcesContent": ["(function() {\r\n    // save these original methods before they are overwritten\r\n    var proto_initIcon = L.Marker.prototype._initIcon;\r\n    var proto_setPos = L.Marker.prototype._setPos;\r\n\r\n    var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\r\n\r\n    L.Marker.addInitHook(function () {\r\n        var iconOptions = this.options.icon && this.options.icon.options;\r\n        var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\r\n        if (iconAnchor) {\r\n            iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\r\n        }\r\n        this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom';\r\n        this.options.rotationAngle = this.options.rotationAngle || 0;\r\n\r\n        // Ensure marker keeps rotated during dragging\r\n        this.on('drag', function(e) { e.target._applyRotation(); });\r\n\r\n        this.on('move', this.slideCancel, this);\r\n    });\r\n\r\n    L.Marker.include({\r\n        _slideToUntil:    undefined,\r\n        _slideToDuration: undefined,\r\n        _slideToLatLng:   undefined,\r\n        _slideFromLatLng: undefined,\r\n\r\n        _initIcon: function() {\r\n            proto_initIcon.call(this);\r\n        },\r\n\r\n        _setPos: function (pos) {\r\n            proto_setPos.call(this, pos);\r\n            this._applyRotation();\r\n        },\r\n\r\n        _applyRotation: function () {\r\n            if(this.options.rotationAngle) {\r\n                this._icon.style[L.DomUtil.TRANSFORM+'Origin'] = this.options.rotationOrigin;\r\n\r\n                if(oldIE) {\r\n                    // for IE 9, use the 2D rotation\r\n                    this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\r\n                } else {\r\n                    // for modern browsers, prefer the 3D accelerated version\r\n                    this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\r\n                }\r\n            }\r\n        },\r\n\r\n        _onZoom: function(){\r\n            this._isZooming = true;\r\n        },\r\n\r\n        _offZoom: function(){\r\n            this._isZooming = false;\r\n        },\r\n\r\n        _slideTo: function() {\r\n            if (!this._map) return;\r\n            if(this._isZooming) {\r\n                this._slideFrame = L.Util.requestAnimFrame(this._slideTo, this);\r\n                return;\r\n            }\r\n\r\n            this._remaining = this._slideToUntil - performance.now();\r\n\r\n            if (this._remaining < 0) {\r\n                this.setLatLng(this._slideToLatLng);\r\n                this.fire('moveend');\r\n\r\n                return this;\r\n            }\r\n\r\n            var startPoint = this._map.latLngToContainerPoint(this._slideFromLatLng);\r\n            var endPoint   = this._map.latLngToContainerPoint(this._slideToLatLng);\r\n            var percentDone = (this._slideToDuration - this._remaining) / this._slideToDuration;\r\n\r\n            var currPoint = endPoint.multiplyBy(percentDone).add(\r\n                startPoint.multiplyBy(1 - percentDone)\r\n            );\r\n            var currLatLng = this._map.containerPointToLatLng(currPoint)\r\n            this.setLatLng(currLatLng);\r\n\r\n            this.fire('move', {latlng: currLatLng});\r\n\r\n            this._slideFrame = L.Util.requestAnimFrame(this._slideTo, this);\r\n        },\r\n\r\n        setRotationAngle: function(angle) {\r\n            this.options.rotationAngle = angle;\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        setRotationOrigin: function(origin) {\r\n            this.options.rotationOrigin = origin;\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        // ðŸ‚method slideTo(latlng: LatLng, options: Slide Options): this\r\n        // Moves this marker until `latlng`, like `setLatLng()`, but with a smooth\r\n        // sliding animation. Fires `movestart` and `moveend` events.\r\n        slideTo: function slideTo(latlng, options) {\r\n            if (!this._map) return;\r\n            this._isZooming = false;\r\n            this._slideToDuration = options.duration;\r\n            this._slideToUntil    = performance.now() + options.duration;\r\n            this._slideFromLatLng = this.getLatLng();\r\n            this._slideToLatLng   = latlng;\r\n\r\n            if(options.rotationAngle) {\r\n                this.options.rotationAngle= options.rotationAngle\r\n            }\r\n\r\n            this.fire('movestart');\r\n            this._slideTo();\r\n\r\n            return this;\r\n        },\r\n\r\n        // ðŸ‚method slideCancel(): this\r\n        // Cancels the sliding animation from `slideTo`, if applicable.\r\n        slideCancel: function slideCancel() {\r\n            L.Util.cancelAnimFrame(this._slideFrame);\r\n        },\r\n\r\n        onAdd: function(map){\r\n            this._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;\r\n\r\n            if (this._zoomAnimated) {\r\n                map.on('zoomanim', this._animateZoom, this);\r\n            }\r\n\r\n            // Fix for skipping the marker calculation when zooming\r\n            map.on('zoomstart', this._onZoom, this);\r\n            map.on('zoomend reset moveend', this._offZoom, this);\r\n\r\n            this._initIcon();\r\n            this.update();\r\n\r\n        },\r\n\r\n        onRemove: function(map){\r\n            if (this.dragging && this.dragging.enabled()) {\r\n                this.options.draggable = true;\r\n                this.dragging.removeHooks();\r\n            }\r\n\r\n            if (this._zoomAnimated) {\r\n                map.off('zoomanim', this._animateZoom, this);\r\n            }\r\n\r\n            map.off('zoomstart', this._onZoom);\r\n            map.off('zoomend reset moveend', this._offZoom);\r\n\r\n            this._removeIcon();\r\n            this._removeShadow();\r\n\r\n        },\r\n    });\r\n\r\n    L.CircleMarker.include({\r\n        slideTo: L.Marker.prototype.slideTo,\r\n        slideCancel: L.Marker.prototype.slideCancel,\r\n        _slideTo: L.Marker.prototype._slideTo\r\n    });\r\n\r\n    L.CircleMarker.addInitHook(function(){\r\n        this.on('move', this.slideCancel, this);\r\n    });\r\n\r\n})();"],
  "mappings": "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",
  "names": []
}
